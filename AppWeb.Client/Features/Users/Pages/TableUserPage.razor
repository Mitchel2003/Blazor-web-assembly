@page "/users"

@inject AppWeb.Client.Features.Users.ViewModels.TableUserPageVM vm
@using AppWeb.Client.Features.Users.Components
@using AppWeb.Client.Shared.Ui

<PageTitle>Users</PageTitle>

<PageHeader Title="Users" Description="Manage platform users">
    <Actions>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" OnClick="vm.HandleAddUser">Add</MudButton>
    </Actions>
</PageHeader>

<SectionContainer Padding="@(SectionContainer.SectionPadding.Sm)">
    @if (vm.Users is null)
    {
        <MudProgressCircular Indeterminate Size="Size.Medium" Class="m-4" />
    }
    else
    {
        <TableUser Users="vm.Users"
                   OnAdd="vm.HandleAddUser"
                   OnView="vm.HandleViewUser"
                   OnEdit="vm.HandleEditUser"
                   OnDelete="vm.HandleDeleteUser" />
    }
</SectionContainer>

@code { protected override async Task OnInitializedAsync() { await vm.LoadAsync(); } }