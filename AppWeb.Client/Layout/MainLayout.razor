@inherits LayoutComponentBase
@using AppWeb.Client.Layout.Theme

@namespace AppWeb.Client.Layout

<MudThemeProvider Theme="@PastelTheme.Default" IsDarkMode="@_isDark" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar>
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
        <MudText Class="ml-2 mr-auto" Typo="Typo.subtitle1">My Application</MudText>
        <MudIconButton Icon="@(_isDark ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)" Color="Color.Inherit" OnClick="ToggleDarkMode" />
    </MudAppBar>
    <MudDrawer @bind-Open="@_drawerOpen" Elevation="0" Variant="DrawerVariant.Responsive" Class="border-r">
        <SidebarNav />
    </MudDrawer>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    bool _drawerOpen = true;
    bool _isDark = false;
    void DrawerToggle() => _drawerOpen = !_drawerOpen;
    void ToggleDarkMode() => _isDark = !_isDark;
}